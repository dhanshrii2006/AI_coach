<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emotion Detection Dashboard</title>
    <style>
        /* Root Variables */
        :root {
            --primary-color: #4f46e5; /* Main color */
            --secondary-color: #f9fafb; /* Light background */
            --accent-color: #374151; /* Text color */
            --hover-color: #e0e7ff; /* Hover color for links */
            --active-color: #4338ca; /* Active button color */
            --background-color: #f3f4f6; /* Body background */
            --card-background: #ffffff; /* Card background */
            --shadow-color: rgba(0, 0, 0, 0.1); /* Shadow color */
            --border-radius: 0.5rem; /* Border radius */
            --transition-speed: 0.3s; /* Transition speed */
            --font-family: 'Arial', sans-serif; /* Font family */
            --gradient-background: linear-gradient(135deg, #6ee7b7, #3b82f6); /* Gradient background */
        }

        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: var(--font-family);
        }

        body {
            display: flex;
            min-height: 100vh;
            background: var(--gradient-background); /* Gradient background */
            color: var(--accent-color);
            overflow-x: hidden;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 250px;
            background-color: var(--card-background);
            box-shadow: 0 4px 8px var(--shadow-color);
            transition: width var(--transition-speed);
            height: 100vh;
            position: fixed;
            overflow-y: auto;
            z-index: 100;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 2px solid var(--hover-color);
            margin-bottom: 1rem;
            width: 100%;
        }

        .sidebar-menu {
            list-style: none;
            padding: 0;
            width: 100%;
        }

        .sidebar-menu li {
            margin: 0.5rem 0;
        }

        .sidebar-menu a {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            text-decoration: none;
            color: var(--accent-color);
            border-radius: var(--border-radius);
            transition: all 0.2s;
        }

        .sidebar-menu a:hover {
            background-color: var(--hover-color);
            color: var(--primary-color);
        }

        .sidebar-menu .icon {
            margin-right: 0.75rem;
            font-size: 1.5rem; /* Increased icon size */
            min-width: 24px;
            text-align: center;
        }

        /* Webcam Styles */
        .webcam-container {
            position: relative;
            width: 100%;
            aspect-ratio: 9/16;
            background-color: #000;
            border-radius: var(--border-radius);
            overflow: hidden;
            margin-top: 1rem;
        }

        .webcam {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            margin-left: 250px; /* Sidebar width */
            padding: 2rem;
            transition: margin var(--transition-speed);
            min-height: 100vh;
            background-color: rgba(255, 255, 255, 0.9); /* Slightly transparent white */
            border-radius: var(--border-radius);
            box-shadow: 0 4px 8px var(--shadow-color);
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .dashboard-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-color);
        }

        /* Video Container Styles */
        .video-container {
            background-color: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 8px var(--shadow-color);
            padding: 1.5rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
            transition: transform var(--transition-speed);
        }

        .video-container:hover {
            transform: scale(1.02);
        }

        .video-player {
            width: 100%;
            aspect-ratio: 16/9;
            background-color: #000;
            border-radius: var(--border-radius);
            overflow: hidden;
            position: relative;
        }

        /* Emotion Detection Styles */
        .emotion-detection {
            background-color: var(--card-background);
            border: 2px solid var(--primary-color);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 8px var(--shadow-color);
            padding: 1rem;
            margin-bottom: 2rem;
            text-align: center;
            aspect-ratio: 16/9;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: transform var(--transition-speed);
        }

        .emotion-detection:hover {
            transform: scale(1.02);
        }

        .emotion-display {
            font-size: 2rem;
            font-weight: 600;
            color: var(--accent-color);
            margin-top: 1rem;
        }

        /* Chatbox Styles */
        .chatbox {
            position: fixed;
            top: 1rem;
            right: 1rem;
            width: 50px;
            height: 50px;
            background-color: var(--primary-color);
            border-radius: 50%;
            box-shadow: 0 4px 8px var(--shadow-color);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 90;
            transition: background-color var(--transition-speed);
        }

        .chatbox:hover {
            background-color: var(--active-color);
        }

        .chatbox-content {
            display: none;
            position: fixed;
            top: 60px;
            right: 1rem;
            width: 300px;
            background-color: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 8px var(--shadow-color);
            z-index: 100;
        }

        .chatbox-header {
            padding: 1rem;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .chatbox-body {
            height: 300px;
            overflow-y: auto;
            padding: 1rem;
            background-color: var(--secondary-color);
        }

        .message {
            margin-bottom: 1rem;
            max-width: 80%;
        }

        .user-message {
            margin-left: auto;
            background-color: var(--primary-color);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
        }

        .bot-message {
            margin-right: auto;
            background-color: var(--card-background);
            color: var(--accent-color);
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            box-shadow: 0 1px 2px var(--shadow-color);
        }

        /* Chat Input Styles */
        .chatbox-input {
            display: flex;
            padding: 0.5rem;
        }

        .chatbox-input input {
            flex: 1;
            padding: 0.5rem;
            border: 1px solid var(--primary-color);
            border-radius: var(--border-radius);
        }

        .chatbox-input button {
            padding: 0.6rem 1rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color var(--transition-speed);
        }

        .chatbox-input button:hover {
            background-color: var(--active-color);
        }

        /* Mouse Tracking Indicator */
        .mouse-tracking {
            position: fixed;
            bottom: 1rem;
            left: 1rem;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            font-size: 0.875rem;
            z-index: 100;
        }
    </style>
</head>
<body>
    <!-- Left Sidebar -->
    <aside class="sidebar left-sidebar">
        <div class="sidebar-header">
            <span class="text">Emotion Dashboard</span>
            <button class="toggle-btn" id="leftToggle">â‰¡</button>
        </div>
        <ul class="sidebar-menu">
            <li>
                <a href="user_profile.html">
                    <span class="icon">ðŸ‘¤</span>
                    <span class="text">User  Profile</span>
                </a>
            </li>
            <li>
                <a href="analysis.html">
                    <span class="icon">ðŸ“Š</span>
                    <span class="text">Analysis</span>
                </a>
            </li>
            <li>
                <a href="history.html">
                    <span class="icon">ðŸ“œ</span>
                    <span class="text">History</span>
                </a>
            </li>
        </ul>
        <div class="webcam-container">
            <video id="webcam" class="webcam" autoplay></video>
        </div>
        <div class="emotion-detection">
            <h3>Emotion Detection</h3>
            <div class="emotion-display" id="emotionDisplay">Emotion: Neutral</div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <div class="dashboard-header">
            <h1 class="dashboard-title">Emotion Detection Dashboard</h1>
        </div>

        <!-- Video Player Section -->
        <div class="video-container">
            <div class="video-player" id="videoPlayer">
                <!-- YouTube iframe will be inserted here -->
            </div>
            <div class="video-controls">
                <input type="text" class="video-input" id="videoUrl" placeholder="Paste YouTube URL here..." style="width: calc(100% - 120px);">
                <button class="btn btn-primary" id="playVideo">Play Video</button>
            </div>
        </div>

        <!-- Mouse Tracking Indicator -->
        <div class="mouse-tracking" id="mouseTracking">
            Mouse: X: 0, Y: 0
        </div>
    </main>

    <!-- Chatbox -->
    <div class="chatbox" id="chatbox">
        <div class="chatbox-header" id="chatboxToggle">
            <h3 class="chatbox-title">ðŸ’¬</h3>
        </div>
        <div class="chatbox-content" id="chatboxContent">
            <div class="chatbox-body" id="chatMessages">
                <div class="message bot-message">
                    Hello! I'm your emotion assistant. How can I help you today?
                </div>
            </div>
            <div class="chatbox-input">
                <input type="text" id="chatInput" placeholder="Type your message...">
                <button id="sendMessage">Send</button>
            </div>
        </div>
    </div>

    <script>
        // JavaScript for the dashboard functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Sidebar toggle functionality
            const leftToggle = document.getElementById('leftToggle');
            const leftSidebar = document.querySelector('.left-sidebar');

            leftToggle.addEventListener('click', function() {
                leftSidebar.classList.toggle('collapsed');
            });

            // Chatbox toggle functionality
            const chatbox = document.getElementById('chatbox');
            const chatboxToggle = document.getElementById('chatboxToggle');
            const chatboxContent = document.getElementById('chatboxContent');

            chatboxToggle.addEventListener('click', function() {
                chatboxContent.style.display = chatboxContent.style.display === 'none' ? 'block' : 'none';
            });

            // Chat functionality
            const chatInput = document.getElementById('chatInput');
            const sendMessageBtn = document.getElementById('sendMessage');
            const chatMessages = document.getElementById('chatMessages');

            function addMessage(text, isUser  ) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message');
                messageDiv.classList.add(isUser   ? 'user-message' : 'bot-message');
                messageDiv.textContent = text;
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            sendMessageBtn.addEventListener('click', function() {
                const message = chatInput.value.trim();
                if (message) {
                    addMessage(message, true);
                    chatInput.value = '';

                    // Simulate bot response
                    setTimeout(() => {
                        const responses = [
                            "I see you're interested in emotion detection. Would you like me to analyze your current emotional state?",
                            "Based on your mouse movements, you seem engaged with the content.",
                            "I can provide suggestions based on your emotional responses to the video.",
                            "Would you like to learn more about how emotion detection works?"
                        ];
                        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                        addMessage(randomResponse, false);
                    }, 1000);
                }
            });

            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessageBtn.click();
                }
            });

            // YouTube video player functionality
            const playVideoBtn = document.getElementById('playVideo');
            const videoUrlInput = document.getElementById('videoUrl');
            const videoPlayer = document.getElementById('videoPlayer');

            playVideoBtn.addEventListener('click', function() {
                const url = videoUrlInput.value.trim();
                if (url) {
                    let videoId = '';

                    // Extract video ID from URL
                    const youtubeRegex = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
                    const match = url.match(youtubeRegex);
                    if (match) {
                        videoId = match[1];
                    }

                    if (videoId) {
                        videoPlayer.innerHTML = `
                            <iframe 
                                width="100%" 
                                height="100%" 
                                src="https://www.youtube.com/embed/${videoId}?autoplay=1" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                allowfullscreen>
                            </iframe>
                        `;
                    } else {
                        alert('Please enter a valid YouTube URL');
                    }
                }
            });

            // Simulate emotion detection
            const emotions = ['Happy', 'Sad', 'Angry', 'Surprised', 'Neutral', 'Disgusted', 'Fearful'];
            setInterval(() => {
                const randomEmotion = emotions[Math.floor(Math.random() * emotions.length)];
                document.getElementById('emotionDisplay').textContent = `Emotion: ${randomEmotion}`;
            }, 3000);

            // Mouse tracking functionality
            const mouseTracking = document.getElementById('mouseTracking');

            document.addEventListener('mousemove', function(e) {
                mouseTracking.textContent = `Mouse: X: ${e.clientX}, Y: ${e.clientY}`;
            });

            // Webcam functionality
            const webcam = document.getElementById('webcam');
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(stream => {
                    webcam.srcObject = stream;
                })
                .catch(err => {
                    console.error("Error accessing webcam: ", err);
                });
        });
    </script>
</body>
</html>
